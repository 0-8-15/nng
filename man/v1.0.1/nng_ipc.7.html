---
version: v1.0.1
layout: refman
---
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>nng_ipc(7)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="manpage toc2 toc-left">
<div id="header">
<h1>nng_ipc(7) Manual Page</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_synopsis">SYNOPSIS</a></li>
<li><a href="#_description">DESCRIPTION</a>
<ul class="sectlevel2">
<li><a href="#_registration">Registration</a></li>
<li><a href="#_uri_format">URI Format</a></li>
<li><a href="#_socket_address">Socket Address</a></li>
<li><a href="#_transport_options">Transport Options</a></li>
</ul>
</li>
<li><a href="#_see_also">SEE ALSO</a></li>
</ul>
</div>
<h2 id="_name">NAME</h2>
<div class="sectionbody">
<p>nng_ipc - IPC transport</p>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;nng/transport/ipc/ipc.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">nng_ipc_register</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
The <em>ipc</em> transport provides communication support between
<em>nng</em> sockets within different processes on the same host.
For POSIX platforms, this is implemented using UNIX domain sockets.
For Windows, this is implemented using Windows Named Pipes.
Other platforms may have different implementation strategies.</p>
</div>
<div class="sect2">
<h3 id="_registration">Registration</h3>
<div class="paragraph">
<p>The <em>ipc</em> transport is generally built-in to the <em>nng</em> core, so
no extra steps to use it should be necessary.</p>
</div>
</div>
<div class="sect2">
<h3 id="_uri_format">URI Format</h3>
<div class="paragraph">
<p>
This transport uses URIs using the scheme <code>ipc://</code>, followed by a path
name in the file system where the socket or named pipe should be created.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
On Windows, all names are prefixed by <code>\\.\pipe\</code> and do not
reside in the normal file system.
On POSIX platforms, the path is taken literally, and is relative to
the current directory, unless it begins with <code>/</code>, in which case it is
relative to the root directory.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When using relative paths on POSIX systems, the address used and returned
in properties like <code>NNG_OPT_LOCADDR</code> and <code>NNG_OPT_URL</code> will also be relative.
Consequently, they will only be interpreted the same by processes that have
the same working directory.
To ensure maximum portability and safety, absolute paths are recommended
whenever possible.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If compatibility with legacy <em>nanomsg</em> applications is required,
then pathnames must not be longer than 122 bytes, including the final
<code>NUL</code> byte.
This is because legacy versions of <em>nanomsg</em> cannot express URLs
longer than 128 bytes, including the <code>ipc://</code> prefix.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_socket_address">Socket Address</h3>
<div class="paragraph">
<p>When using an <code><a href="nng_sockaddr.5.html">nng_sockaddr</a></code> structure,
the actual structure is of type <code><a href="nng_sockaddr_ipc.5.html">nng_sockaddr_ipc</a></code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_transport_options">Transport Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>NNG_OPT_IPC_PERMISSIONS</code></dt>
<dd>
<p>(<code>int</code>)
This write-only option may be applied to a listener to configure the
permissions that are used on the UNIX domain socket created by that listener.
This property is only supported on POSIX systems.
The value is of type <code>int</code>, representing the normal permission bits
on a file, such as <code>0600</code> (typically meaning read-write to the owner, and
no permissions for anyone else.)
The default is system-specific, most often <code>0644</code>.</p>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Not all systems validate these permissions.
In particular, illumos and Solaris are known to ignore these permission
settings when connecting.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Normally both read and write permission will be necessary for a
peer dialer to connect.
See your system documentation for UNIX domain sockets for more information.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <em>umask</em> of the process is <strong>not</strong> applied to these bits.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The best practice for limiting access is to place the socket in a
directory writable only by the server, and only readable and searchable
by clients.
All mainstream POSIX systems will fail to permit a client to connect
to a socket located in a directory for which the client lacks search (execute)
permission.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Also consider using the <code>NNG_OPT_IPC_PEER_UID</code> property from within a
a pipe notification callback (<code><a href="nng_pipe_notify.3.html">nng_pipe_notify()</a></code>)
to validate peer credentials.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>NNG_OPT_IPC_SECURITY_DESCRIPTOR</code></dt>
<dd>
<p>(<code>PSECURITY_DESCRIPTOR</code>)
This write-only option may be used on listeners on Windows platforms to
configure the <code>SECURITY_DESCRIPTOR</code> that is used when creating the underlying
named pipe.
The value is a pointer, <code>PSECURITY_DESCRIPTOR</code>, and may only be
applied to listeners that have not been started yet.</p>
</dd>
<dt class="hdlist1"><code>NNG_OPT_IPC_PEER_UID</code></dt>
<dd>
<p>(<code>uint64_t</code>)
This read-only option may be read from a pipe to determine the peer user id.
This is the effective user id of the peer when either the underlying
<code>listen()</code> or <code>connect()</code> calls were made, and is not forgeable.
This option is generally only available on POSIX systems.</p>
</dd>
<dt class="hdlist1"><code>NNG_OPT_IPC_PEER_GID</code></dt>
<dd>
<p>(<code>uint64_t</code>)
This read-only option may be read from a pipe to determine the peer primary
group id.
This is the effective group id of the peer when either the underlying
<code>listen()</code> or <code>connect()</code> calls were made, and is not forgeable.
This option is generally only available on POSIX systems.</p>
</dd>
<dt class="hdlist1"><code>NNG_OPT_IPC_PEER_PID</code></dt>
<dd>
<p>(<code>uint64_t</code>)
This read-only option may be read from a pipe to determine the process id
of the peer.
This option is only available on Windows, Linux, and certain other systems.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Applications should not assume that the process ID does not change,
as it is possible (although unsupported!) for a nefarious process to pass a
file descriptor between processes.
However, it is not possible for a nefarious application to forge the identity
of a well-behaved one using this method.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>NNG_OPT_IPC_PEER_ZONEID</code></dt>
<dd>
<p>(<code>uint64_t</code>)
This read-only option may be read from a pipe to determine the zone id
of the peer.
Zones (and this option) are only supported on Solaris and illumos systems.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph text-left">
<p><a href="nng_sockaddr.5.html">nng_sockaddr(5)</a>,
<a href="nng.7.html">nng(7)</a></p>
</div>
</div>
</div>
</div>
<link rel="stylesheet" href="./pygments-default.css">
</body>
</html>