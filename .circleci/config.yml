# Debian packages we want (makes life better);
#
# - asciidoctor
# - cmake
# - libmbedtls-dev
# - ninja-build
# - clang
# - clang-format
# - gcc (-7?)
# - g++ (-7?)
#
version: 2
jobs:
  build:
    docker:
      - image: debian:stretch
    steps:
      - checkout
      - run:
          name: Install Dependencies
          command: apt-get update -qq && apt-get install -y build-essential asciidoctor cmake libmbedtls-dev ninja-build clang clang-format
      - run:
          name: Configure
          command: cmake -DNNG_TRANSPORT_TLS=ON -G Nina

      - run:
          name: Build
          command: ninja build

      - run:
          name: Run Tests
          command: ninja test

      - run:
          name: Check Format
          command: ./etc/format-check.sh
